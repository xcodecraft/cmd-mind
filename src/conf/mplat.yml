args1 : &commonargs
    - !arg &tag_arg 
          name    : "tag"
          hotkey  : "t"
          must:  True
          call : "--tag $tag"
          default: !pipe
              cmd : "${CMD_ROOT}/ext/last_tag"
              args: "&{_CMD_NAME} 1"
          values: !pipe
              cmd : "${CMD_ROOT}/ext/last_tag"
              args: "&{_CMD_NAME} 5"
    - !arg &group_arg
          name   : "group"
          hotkey : "g"
          call   : "--host $group"
          values : !pipe
              cmd : "${CMD_ROOT}/ext/read_ini"
              args: "-f /data/x/tools/mara-pub/conf/all.hosts -a "
    - !arg &host_arg
          name   : "host"
          hotkey : "h"
          call   : "--host $host"
          values : !pipe
              cmd : "${CMD_ROOT}/ext/read_ini"
              args: "-f /data/x/tools/mara-pub/conf/all.hosts -a "

main: !cmd
    name : "mplat"
    subs:
        - !cmd
            name : "ver"
            call : "/data/x/tools/mara-pub/rocket_ver.sh"
            args :
                - *group_arg 
                - *host_arg
        - !cmd
            name : "restart"
            call : '/data/x/tools/mara-pub/rocket_cmd.sh --command "/data/x/tools/mara_bin/rg_all.sh stop,clean,reconf,start"'
            args :
                - *group_arg 
                - *host_arg

        - !cmd
            name : "beta_pylon_setup"
            call : '/data/x/tools/mara-pub/rocket_cmd.sh --command "/data/x/libs/beta/pylon-ng/modules/setup.sh"'
            args :
                - *group_arg 
                - *host_arg
        - !cmd
            name : "pylon_setup"
            call : '/data/x/tools/mara-pub/rocket_cmd.sh --command "/data/x/libs/pylon-ng/modules/setup.sh"'
            args :
                - *group_arg 
                - *host_arg
